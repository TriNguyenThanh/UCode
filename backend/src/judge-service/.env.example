# =============================================================================
# JUDGE SERVICE - ENVIRONMENT VARIABLES
# =============================================================================
# Copy this file to .env and adjust values as needed

# -----------------------------------------------------------------------------
# EXECUTION MODE
# -----------------------------------------------------------------------------
# Choose between 'sync' (sequential) or 'async' (parallel) processing
# - sync: Processes 1 message at a time (stable, lower resource usage)
# - async: Processes multiple messages in parallel (faster, higher resource usage)
EXECUTION_MODE=async

# -----------------------------------------------------------------------------
# CONCURRENCY SETTINGS
# -----------------------------------------------------------------------------
# Maximum number of submissions to process simultaneously
# Sync mode: Should be 1 (processes sequentially anyway)
# Async mode: 2-4 recommended, depends on server capacity
MAX_CONCURRENT_SUBMISSIONS=4

# Maximum number of testcases to run in parallel PER submission
# Only applies to async mode
# Recommended: 2-4 (depends on CPU cores)
MAX_PARALLEL_TESTCASES=4

# Total concurrent isolate boxes = MAX_CONCURRENT_SUBMISSIONS × MAX_PARALLEL_TESTCASES
# Example: 4 × 4 = 16 boxes running simultaneously

# -----------------------------------------------------------------------------
# RESOURCE LIMITS (PER TESTCASE)
# -----------------------------------------------------------------------------
# Default time limit in seconds
DEFAULT_TIME_LIMIT=3

# Default memory limit in MB
DEFAULT_MEMORY_LIMIT=256

# -----------------------------------------------------------------------------
# RABBITMQ CONNECTION
# -----------------------------------------------------------------------------
RABBITMQ_HOST=localhost
RABBITMQ_USER=guest
RABBITMQ_PASS=guest

# -----------------------------------------------------------------------------
# ERROR HANDLING
# -----------------------------------------------------------------------------
# Maximum retry attempts for failed submissions
MAX_RETRY_COUNT=3

# -----------------------------------------------------------------------------
# EXAMPLE CONFIGURATIONS
# -----------------------------------------------------------------------------

# Small Server (2 cores, 4GB RAM):
# EXECUTION_MODE=async
# MAX_CONCURRENT_SUBMISSIONS=2
# MAX_PARALLEL_TESTCASES=2
# → 4 concurrent boxes, ~1GB RAM usage

# Medium Server (4 cores, 8GB RAM):
# EXECUTION_MODE=async
# MAX_CONCURRENT_SUBMISSIONS=4
# MAX_PARALLEL_TESTCASES=4
# → 16 concurrent boxes, ~4GB RAM usage

# Large Server (8+ cores, 16GB+ RAM):
# EXECUTION_MODE=async
# MAX_CONCURRENT_SUBMISSIONS=8
# MAX_PARALLEL_TESTCASES=8
# → 64 concurrent boxes, ~16GB RAM usage

# Conservative/Stable (any server):
# EXECUTION_MODE=sync
# MAX_CONCURRENT_SUBMISSIONS=1
# → 1 box at a time, minimal resource usage
