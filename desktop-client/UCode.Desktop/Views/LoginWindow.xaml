<Window x:Class="UCode.Desktop.Views.LoginWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
        xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
        Title="UCode - Login"
        Height="600"
        Width="450"
        WindowStartupLocation="CenterScreen"
        Background="White"
        ResizeMode="CanMinimize">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Grid Grid.Row="0"
              Background="{DynamicResource MahApps.Brushes.Accent}"
              Height="180">
            <StackPanel VerticalAlignment="Center"
                        HorizontalAlignment="Center">
                <iconPacks:PackIconMaterial Kind="CodeBraces"
                                            Width="80"
                                            Height="80"
                                            Foreground="White"
                                            HorizontalAlignment="Center"
                                            Margin="0,0,0,10"/>
                <TextBlock Text="UCode"
                           FontSize="36"
                           FontWeight="Bold"
                           Foreground="White"
                           HorizontalAlignment="Center"/>
                <TextBlock Text="Online Judge Platform"
                           FontSize="14"
                           Foreground="White"
                           HorizontalAlignment="Center"
                           Opacity="0.9"
                           Margin="0,5,0,0"/>
            </StackPanel>
        </Grid>

        <!-- Login Form -->
        <StackPanel Grid.Row="1"
                    Margin="40,30">

            <TextBlock Text="Sign In"
                       FontSize="24"
                       FontWeight="SemiBold"
                       Margin="0,0,0,30"/>

            <!-- Username -->
            <TextBox mah:TextBoxHelper.Watermark="Username or Email"
                     mah:TextBoxHelper.UseFloatingWatermark="True"
                     mah:TextBoxHelper.ClearTextButton="True"
                     Margin="0,0,0,20"
                     FontSize="14"
                     Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}">
                <TextBox.InputBindings>
                    <KeyBinding Key="Enter"
                                Command="{Binding LoginCommand}"/>
                </TextBox.InputBindings>
            </TextBox>

            <!-- Password -->
            <PasswordBox x:Name="PasswordBox"
                         mah:TextBoxHelper.Watermark="Password"
                         mah:TextBoxHelper.UseFloatingWatermark="True"
                         Margin="0,0,0,20"
                         FontSize="14"
                         PasswordChanged="PasswordBox_PasswordChanged">
                <PasswordBox.InputBindings>
                    <KeyBinding Key="Enter"
                                Command="{Binding LoginCommand}"/>
                </PasswordBox.InputBindings>
            </PasswordBox>

            <!-- Remember Me -->
            <CheckBox Content="Remember me"
                      IsChecked="{Binding RememberMe}"
                      Margin="0,0,0,20"/>

            <!-- Error Message -->
            <Border Background="Red"
                    CornerRadius="3"
                    Padding="10"
                    Margin="0,0,0,20"
                    Visibility="{Binding ErrorMessage, Converter={StaticResource StringToVisibilityConverter}}">
                <TextBlock Text="{Binding ErrorMessage}"
                           Foreground="White"
                           TextWrapping="Wrap"/>
            </Border>

            <!-- Login Button -->
            <Button Content="LOGIN"
                    Command="{Binding LoginCommand}"
                    Height="45"
                    FontSize="14"
                    FontWeight="SemiBold"
                    Style="{DynamicResource MahApps.Styles.Button.Square.Accent}"
                    Cursor="Hand"
                    Margin="0,0,0,15">
                <Button.IsEnabled>
                    <MultiBinding Converter="{StaticResource BooleanAndConverter}">
                        <Binding Path="IsLoading"
                                 Converter="{StaticResource InverseBooleanConverter}"/>
                    </MultiBinding>
                </Button.IsEnabled>
            </Button>

            <!-- Loading Indicator -->
            <mah:MetroProgressBar IsIndeterminate="True"
                                  Height="4"
                                  Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}"
                                  Margin="0,10,0,0"/>

            <!-- Additional Links -->
            <StackPanel Orientation="Horizontal"
                        HorizontalAlignment="Center"
                        Margin="0,20,0,0">
                <TextBlock Text="Forgot password?"
                           Foreground="{DynamicResource MahApps.Brushes.Accent}"
                           Cursor="Hand"
                           FontWeight="Medium"/>
            </StackPanel>
        </StackPanel>
    </Grid>
</Window>