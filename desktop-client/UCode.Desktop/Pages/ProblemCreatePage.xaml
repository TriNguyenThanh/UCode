<UserControl x:Class="UCode.Desktop.Pages.ProblemCreatePage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DesignHeight="800" d:DesignWidth="1200"
             Background="#F5F5F5">

    <Grid>
        <!-- Loading Overlay -->
        <Grid Background="#80000000" 
              Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}" 
              Panel.ZIndex="1000">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <ProgressBar IsIndeterminate="True" Width="200" Height="4" Foreground="#FACB01"/>
                <TextBlock Text="Đang tạo..." Foreground="White" FontSize="16" FontWeight="SemiBold" Margin="0,15,0,0" HorizontalAlignment="Center"/>
            </StackPanel>
        </Grid>

        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="40">
                <!-- Header -->
                <TextBlock Text="Tạo bài toán mới" FontSize="28" FontWeight="Bold" Foreground="#191970" Margin="0,0,0,5"/>
                <TextBlock Text="Tạo thông tin cơ bản, sau đó chuyển sang trang chỉnh sửa để thêm chi tiết" 
                           FontSize="14" Foreground="#666" Margin="0,0,0,30"/>

                <!-- Form -->
                <Border Style="{StaticResource CardStyle}">
                    <StackPanel>
                        <!-- Title -->
                        <TextBlock Text="Tên bài toán *" FontSize="14" FontWeight="SemiBold" Foreground="#191970" Margin="0,0,0,5"/>
                        <TextBox Text="{Binding Title, UpdateSourceTrigger=PropertyChanged}"
                                 Height="40" FontSize="14" Padding="10" Margin="0,0,0,20"/>
                        <TextBlock Text="VD: Two Sum, Binary Search, Merge Sort..." 
                                   FontSize="12" Foreground="#999" Margin="0,-15,0,20"/>

                        <!-- Code -->
                        <TextBlock Text="Mã bài toán (tùy chọn)" FontSize="14" FontWeight="SemiBold" Foreground="#191970" Margin="0,0,0,5"/>
                        <TextBox Text="{Binding Code, UpdateSourceTrigger=PropertyChanged}"
                                 Height="40" FontSize="14" Padding="10" Margin="0,0,0,20"/>
                        <TextBlock Text="VD: P001. Để trống để tự động tạo từ title" 
                                   FontSize="12" Foreground="#999" Margin="0,-15,0,20"/>

                        <!-- Difficulty -->
                        <TextBlock Text="Độ khó *" FontSize="14" FontWeight="SemiBold" Foreground="#191970" Margin="0,0,0,5"/>
                        <ComboBox SelectedItem="{Binding Difficulty}"
                                  Height="40" FontSize="14" Margin="0,0,0,20">
                            <ComboBoxItem Content="Dễ" Tag="EASY" IsSelected="True"/>
                            <ComboBoxItem Content="Trung bình" Tag="MEDIUM"/>
                            <ComboBoxItem Content="Khó" Tag="HARD"/>
                        </ComboBox>

                        <!-- Visibility -->
                        <TextBlock Text="Hiển thị *" FontSize="14" FontWeight="SemiBold" Foreground="#191970" Margin="0,0,0,5"/>
                        <ComboBox SelectedItem="{Binding Visibility}"
                                  Height="40" FontSize="14" Margin="0,0,0,20">
                            <ComboBoxItem Content="Riêng tư" Tag="PRIVATE" IsSelected="True"/>
                            <ComboBoxItem Content="Công khai" Tag="PUBLIC"/>
                        </ComboBox>

                        <!-- Actions -->
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
                            <Button Content="Hủy" Style="{StaticResource SecondaryButtonStyle}"
                                    Command="{Binding CancelCommand}"
                                    Width="120" Margin="0,0,15,0"/>
                            <Button Content="{Binding IsLoading, Converter={StaticResource CreateButtonTextConverter}}"
                                    Style="{StaticResource PrimaryButtonStyle}"
                                    Command="{Binding SaveCommand}"
                                    IsEnabled="{Binding IsLoading, Converter={StaticResource InverseBooleanConverter}}"
                                    Width="150"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>
